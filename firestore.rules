
rules_version = '2';
service cloud.firestore {
  match /databases/{database}/documents {
    
    // PERMISSÃO PÚBLICA DE LEITURA PARA HIERARQUIA
    // Essencial para o seletor de "Área de Atuação" no Login/Registro
    match /curricular_components/{id} {
      allow read: if true;
      allow write: if request.auth != null;
    }
    
    match /disciplines/{id} { allow read: if true; allow write: if request.auth != null; }
    match /chapters/{id} { allow read: if true; allow write: if request.auth != null; }
    match /units/{id} { allow read: if true; allow write: if request.auth != null; }
    match /topics/{id} { allow read: if true; allow write: if request.auth != null; }

    // PERMISSÃO PARA USUÁRIOS LOGADOS
    // Permite leitura/escrita se o usuário estiver autenticado
    match /{document=**} {
      allow read, write: if request.auth != null;
    }
  }
}
